

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>On Kebnekaise cluster &mdash; Using Python in an HPC environment 2.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="_static/sphinx_lesson.css?v=e9df6548" />
      <link rel="stylesheet" type="text/css" href="_static/term_role_formatting.css?v=4194e21c" />
      <link rel="stylesheet" type="text/css" href="_static/sphinx_rtd_theme_ext_color_contrast.css?v=8e8ea19f" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=fd3f3429" />
      <link rel="stylesheet" type="text/css" href="_static/jupyter-sphinx.css" />
      <link rel="stylesheet" type="text/css" href="_static/thebelab.css" />
      <link rel="stylesheet" type="text/css" href="_static/custom_theme.css?v=7da4766e" />
      <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=60dbed4a"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="_static/copybutton.js?v=6dbb43f8"></script>
      <script src="_static/minipres.js?v=a0d29692"></script>
      <script src="_static/thebelab-helper.js"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="_static/togglebutton.js?v=4a39c7ea"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
      <script src="_static/design-tabs.js?v=f930bc37"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="On Bianca cluster" href="bianca.html" />
    <link rel="prev" title="On UPPMAX clusters" href="uppmax.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Using Python in an HPC environment
              <img src="_static/hpc2n-lunarc-uppmax-hpc-course.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Pre-requirements:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="prereqs.html">Pre-requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="preparations.html">Prepare the environment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Common:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="schedule.html">Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/login.html">Log in and other preparations</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/use_tarball.html">Use the tarball with exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/use_text_editor.html">Use a text editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/understanding_clusters.html">HPC clusters</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/naiss_projects_overview.html">NAISS projects overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/interactive_ondemand.html">Interactive sessions and Desktop On-Demand</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Lessons day 1 (Intro to Python):</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="common/day1.html">Link to Day 1 (Intro to Python)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Lessons day 2 (packages and analysis):</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="day2/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="day2/use_packages.html">Using packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="day2/install_packages.html">Install packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="day2/use_isolated_environments.html">Use isolated environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="day2/interactive.html">Interactive work on the compute nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="day2/ondemand-desktop.html">Desktop On Demand</a></li>
<li class="toctree-l1"><a class="reference internal" href="day2/IDEs.html">Loading IDEs</a></li>
<li class="toctree-l1"><a class="reference internal" href="summary2.html">Summary day 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="day2/evaluation.html">Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="day2/python_at_hpc_centers.html">Python documentations at the different HPC centres</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Lessons day 3 (advanced analysis):</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="day3/batch.html">Running Python in batch mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="day3/big_data.html">Big data with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="summary3.html">Summary day 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="day3/evaluation.html">Evaluation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Lessons day 4 (parallel and ML):</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="day4/parallel.html">Parallel computing with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="day4/gpu.html">Using GPUs with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="day4/ml.html">Machine Learning and Deep Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="day4/dim_reduction.html">Dimensionality Reduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="day4/evaluation.html">Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="summary4.html">Summary day 4</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Extra:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="extra/other_courses.html">Other courses</a></li>
<li class="toctree-l1"><a class="reference internal" href="extra/packages_deeper.html">More about packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="extra/isolated_deeper.html">Developing in isolated environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="extra/jupyterHPC2N.html">Jupyter at Kebnekaise</a></li>
<li class="toctree-l1"><a class="reference internal" href="day4/ML_deeper.html">More about ML</a></li>
<li class="toctree-l1"><a class="reference internal" href="uppmax.html">On UPPMAX clusters</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">On Kebnekaise cluster</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#accessing-kebnekaise">Accessing Kebnekaise</a></li>
<li class="toctree-l2"><a class="reference internal" href="#loading-python">Loading Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="#starting-python-and-running-python-scripts">Starting Python and running Python scripts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bianca.html">On Bianca cluster</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Using Python in an HPC environment</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">On Kebnekaise cluster</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/UPPMAX/HPC-python/blob/main/docs/kebnekaise.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="on-kebnekaise-cluster">
<h1>On Kebnekaise cluster<a class="headerlink" href="#on-kebnekaise-cluster" title="Link to this heading"></a></h1>
<div class="admonition-questions questions admonition" id="questions-0">
<p class="admonition-title">Questions</p>
<ul class="simple">
<li><p>Can you login to Kebnekaise?</p></li>
<li><p>Did you try and find Python packages at the system?</p></li>
<li><p>Can you load Python and start it, as well as run a short program?</p></li>
</ul>
</div>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Show how to load Python</p></li>
<li><p>show how to run Python scripts and start the Python commandline</p></li>
</ul>
</div>
<p>There are a few things that are different when using Python on the Kebnekaise cluster compared to the UPPMAX clusters:</p>
<ul class="simple">
<li><p>Anaconda/conda/miniconda are NOT recommended and are not supported. You <em>can</em> use it, but we generally ask our users to not install Anaconda on our clusters. We recommand that you consider other options like a virtual environment (or a Singularity container, for the most complicated cases). More information here: <a class="reference external" href="https://www.hpc2n.umu.se/documentation/guides/anaconda">https://www.hpc2n.umu.se/documentation/guides/anaconda</a></p></li>
<li><p>When loading Python or Python packages, there are prerequisites that needs to be loaded first. See which ones with <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">spider</span> <span class="pre">&lt;Python&gt;/&lt;version&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">spider</span> <span class="pre">&lt;Python-package&gt;/&lt;version&gt;</span></code></p></li>
<li><p>We have many Python packages site-installed as modules. Some of these are</p>
<ul>
<li><p>ASE</p></li>
<li><p>Keras</p></li>
<li><p>PyTorch</p></li>
<li><p>SciPy-bundle (Bottleneck, deap, mpi4py, mpmath, numexpr, numpy, pandas, scipy - some of the versions have more)</p></li>
<li><p>TensorFlow</p></li>
<li><p>Theano</p></li>
<li><p>matplotlib</p></li>
<li><p>scikit-learn</p></li>
<li><p>scikit-image</p></li>
<li><p>pip</p></li>
<li><p>iPython</p></li>
<li><p>Cython</p></li>
</ul>
</li>
<li><p>We do not currently have Jupyter installed, but there are ways for users to run it. Since it is somewhat involved, please contact us at <a class="reference external" href="mailto:support&#37;&#52;&#48;hpc2n&#46;umu&#46;se">support<span>&#64;</span>hpc2n<span>&#46;</span>umu<span>&#46;</span>se</a> for more information</p></li>
</ul>
<section id="accessing-kebnekaise">
<h2>Accessing Kebnekaise<a class="headerlink" href="#accessing-kebnekaise" title="Link to this heading"></a></h2>
<p><strong>Kebnekaise login node</strong></p>
<p>Login with</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>ssh<span class="w"> </span>&lt;hpc2n-username&gt;@kebnekaise.hpc2n.umu.se
</pre></div>
</div>
<p>using your favourite SSH client. More information about this here: <a class="reference external" href="https://www.hpc2n.umu.se/access/login">https://www.hpc2n.umu.se/access/login</a></p>
<p><strong>Kebnekaise ThinLinc login node</strong></p>
<p>If you do not have a preferred SSH client installed, then this is the recommended way to login, as it comes with a GUI environment directly and no need to run an X11 server.</p>
<p>Use</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>kebnekaise-tl.hpc2n.umu.se
</pre></div>
</div>
<p>as the server in the ThinLinc login.</p>
<p>There is a guide for you to follow here: <a class="reference external" href="https://www.hpc2n.umu.se/documentation/guides/thinlinc">https://www.hpc2n.umu.se/documentation/guides/thinlinc</a></p>
</section>
<section id="loading-python">
<h2>Loading Python<a class="headerlink" href="#loading-python" title="Link to this heading"></a></h2>
<p>We are going to mainly use Python 3.11.3 for this course, but Python 3.9.5 will be used for some of the GPU and parallel examples. At HPC2N, these modules have the following prerequisites</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>load<span class="w"> </span>GCC/12.3.0<span class="w"> </span>Python/3.11.3
</pre></div>
</div>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>module<span class="w"> </span>load<span class="w"> </span>GCC/10.3.0<span class="w">  </span>Python/3.9.5
</pre></div>
</div>
</section>
<section id="starting-python-and-running-python-scripts">
<h2>Starting Python and running Python scripts<a class="headerlink" href="#starting-python-and-running-python-scripts" title="Link to this heading"></a></h2>
<p>As mentioned in the general section, you start python with either <code class="docutils literal notranslate"><span class="pre">python</span></code> or <code class="docutils literal notranslate"><span class="pre">python3</span></code> (assuming it is a version 3.x of Python you are using).</p>
<div class="admonition-load-python-3-9-5-and-start-it-you-exit-with-exit admonition">
<p class="admonition-title">Load Python 3.9.5 and start it. You exit with <code class="docutils literal notranslate"><span class="pre">exit()</span></code></p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>module<span class="w"> </span>load<span class="w"> </span>GCCcore/10.3.0<span class="w"> </span>Python/3.9.5
$<span class="w"> </span>python
Python<span class="w"> </span><span class="m">3</span>.9.5<span class="w"> </span><span class="o">(</span>default,<span class="w"> </span>Jun<span class="w">  </span><span class="m">3</span><span class="w"> </span><span class="m">2021</span>,<span class="w"> </span><span class="m">02</span>:53:39<span class="o">)</span>
<span class="o">[</span>GCC<span class="w"> </span><span class="m">10</span>.3.0<span class="o">]</span><span class="w"> </span>on<span class="w"> </span>linux
Type<span class="w"> </span><span class="s2">&quot;help&quot;</span>,<span class="w"> </span><span class="s2">&quot;copyright&quot;</span>,<span class="w"> </span><span class="s2">&quot;credits&quot;</span><span class="w"> </span>or<span class="w"> </span><span class="s2">&quot;license&quot;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>more<span class="w"> </span>information.
&gt;&gt;&gt;<span class="w"> </span>exit<span class="o">()</span>
</pre></div>
</div>
</div>
<div class="admonition-try-submitting-one-of-the-python-programs-to-the-batch-system admonition">
<p class="admonition-title">Try submitting one of the Python programs to the batch system.</p>
<p>Remember to change the path in it to the location of your own files!</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>sbatch<span class="w"> </span>run_mmmult.sh
Submitted<span class="w"> </span>batch<span class="w"> </span>job<span class="w"> </span><span class="m">20358127</span>
</pre></div>
</div>
</div>
<p>It will create a file named <code class="docutils literal notranslate"><span class="pre">slurm-&lt;jobid&gt;.out</span></code>. Look at the contents with <code class="docutils literal notranslate"><span class="pre">cat</span></code> or <code class="docutils literal notranslate"><span class="pre">vi</span></code>.</p>
<div class="admonition-keypoints keypoints admonition" id="keypoints-0">
<p class="admonition-title">Keypoints</p>
<ul class="simple">
<li><p>You have logged in to Kebnekaise</p></li>
<li><p>You have loaded Python and tried running a small Python code</p></li>
</ul>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="uppmax.html" class="btn btn-neutral float-left" title="On UPPMAX clusters" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="bianca.html" class="btn btn-neutral float-right" title="On Bianca cluster" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, UPPMAX/HPC2N/LUNARC/InfraVis.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>