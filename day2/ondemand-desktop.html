

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Desktop On Demand &mdash; Using Python in an HPC environment 2.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx_lesson.css?v=e9df6548" />
      <link rel="stylesheet" type="text/css" href="../_static/term_role_formatting.css?v=4194e21c" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx_rtd_theme_ext_color_contrast.css?v=8e8ea19f" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=fd3f3429" />
      <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css" />
      <link rel="stylesheet" type="text/css" href="../_static/thebelab.css" />
      <link rel="stylesheet" type="text/css" href="../_static/custom_theme.css?v=7da4766e" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=60dbed4a"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=6dbb43f8"></script>
      <script src="../_static/minipres.js?v=a0d29692"></script>
      <script src="../_static/thebelab-helper.js"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
      <script src="../_static/design-tabs.js?v=f930bc37"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Loading IDEs" href="IDEs.html" />
    <link rel="prev" title="Interactive work on the compute nodes" href="interactive.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Using Python in an HPC environment
              <img src="../_static/hpc2n-lunarc-uppmax-hpc-course.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Pre-requirements:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../prereqs.html">Pre-requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preparations.html">Prepare the environment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Common:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../schedule.html">Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/login.html">Log in and other preparations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/use_tarball.html">Use the tarball with exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/use_text_editor.html">Use a text editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/understanding_clusters.html">HPC clusters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/naiss_projects_overview.html">NAISS projects overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common/interactive_ondemand.html">Interactive sessions and Desktop On-Demand</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Lessons day 1 (Intro to Python):</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../common/day1.html">Link to Day 1 (Intro to Python)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Lessons day 2 (packages and analysis):</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="use_packages.html">Using packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="install_packages.html">Install packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="use_isolated_environments.html">Use isolated environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive.html">Interactive work on the compute nodes</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Desktop On Demand</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-is-desktop-on-demand">What is Desktop On Demand?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#when-should-i-use-it">When should I use it?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#where-are-the-on-demand-applications">Where are the On-Demand Applications?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-start">How do I start?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="IDEs.html">Loading IDEs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../summary2.html">Summary day 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="evaluation.html">Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_at_hpc_centers.html">Python documentations at the different HPC centres</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Lessons day 3 (advanced analysis):</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../day3/batch.html">Running Python in batch mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day3/big_data.html">Big data with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../summary3.html">Summary day 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day3/evaluation.html">Evaluation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Lessons day 4 (parallel and ML):</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../day4/parallel.html">Parallel computing with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day4/gpu.html">Using GPUs with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day4/ml.html">Machine Learning and Deep Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day4/dim_reduction.html">Dimensionality Reduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day4/evaluation.html">Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../summary4.html">Summary day 4</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Extra:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../extra/other_courses.html">Other courses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extra/packages_deeper.html">More about packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extra/isolated_deeper.html">Developing in isolated environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extra/jupyterHPC2N.html">Jupyter at Kebnekaise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day4/ML_deeper.html">More about ML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uppmax.html">On UPPMAX clusters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kebnekaise.html">On Kebnekaise cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bianca.html">On Bianca cluster</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Using Python in an HPC environment</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Desktop On Demand</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/UPPMAX/HPC-python/blob/main/docs/day2/ondemand-desktop.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="desktop-on-demand">
<h1>Desktop On Demand<a class="headerlink" href="#desktop-on-demand" title="Link to this heading"></a></h1>
<div class="admonition-questions questions admonition" id="questions-0">
<p class="admonition-title">Questions</p>
<ul class="simple">
<li><p>What is Desktop On Demand?</p></li>
<li><p>When should I use it?</p></li>
<li><p>Where and how do I start?</p></li>
</ul>
</div>
<div class="admonition-objectives objectives admonition" id="objectives-0">
<p class="admonition-title">Objectives</p>
<ul class="simple">
<li><p>Short introduction to Desktop On Demand</p></li>
<li><p>Typical setup and usage</p></li>
</ul>
</div>
<section id="what-is-desktop-on-demand">
<h2>What is Desktop On Demand?<a class="headerlink" href="#what-is-desktop-on-demand" title="Link to this heading"></a></h2>
<p>At LUNARC (and coming to other HPC centers in the not-too-distant future), the Desktop On Demand service provides an interactive environment for submitting programs to SLURM without the typical shell script. It uses the graphical application launcher (GfxLauncher) to submit jobs to SLURM, connect to the application running on the Compute node, and monitor the application’s progress. It is not itself an option in the Applications menu; rather, it’s the engine that lets you run the listed applications interactively.</p>
<p>Later you will hear us talking more about the GfxLauncher than Desktop On Demand because while the latter is the underlying service provider, the former is what you will see every time you start an interactive application.</p>
<p>Both Spyder and Jupyter are available through Desktop On Demand. Other applications can be launched from an Interactive Terminal or Accelerated Terminal session. VSCode currently only runs on the login nodes, but its command line can be configured to connect and submit jobs to the compute nodes.</p>
<p>Desktop On Demand requires the use of the Thinlinc interface. It is not accessible via ssh.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Dardel also has On-Demand applications located in the equivalent place on its remote desktop, but only 30 ThinLinc licenses are available for the whole facility. Talks are ongoing about whether and by how much to increase the number of licenses, but until the changes are implemented, we advise using SSH with -X forwarding instead. In our experience, ThinLinc access to Dardel is not reliably available, and even when connection succeeds, queue times for On-Demand applications can be very long.</p>
</div>
</section>
<section id="when-should-i-use-it">
<h2>When should I use it?<a class="headerlink" href="#when-should-i-use-it" title="Link to this heading"></a></h2>
<p>Desktop On Demand is most appropriate for <em>interactive</em> work requiring small-to-medium amounts of computing resources.</p>
<p>The GfxLauncher will prompt you for resource specification and then Desktop On Demand will put your resource requests into the same SLURM queue as every other job. Depending on the time and resources you request, you may have to wait a while for your session to start. For information about the capabilities of the available nodes, you can explore the <a class="reference external" href="https://www.lunarc.lu.se/systems/">LUNARC homepage’s Systems tab</a> and follow the links to your desired resource.</p>
<div class="admonition-wall-time-limits admonition">
<p class="admonition-title"><strong>Wall Time Limits</strong></p>
<p>Wall time for interactive work with Desktop On Demand is restricted to 48 consecutive
(not business) hours. In practice, there can be significant startup delays for wall times
as short as 4 hours. Users should save their work frequently and be conservative in their
wall time estimates. To save GPU resources, we also encourage users who are able to submit
jobs requiring minimal supervision as ordinary batch scripts to do that whenever feasible.</p>
</div>
<p>Some On Demand applications will let you configure and submit separate batch jobs that are not bound by the parameters set for the graphical user interface (GUI) in GfxLauncher, although the initial configuration process can be rather involved.</p>
</section>
<section id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Link to this heading"></a></h2>
<section id="where-are-the-on-demand-applications">
<h3>Where are the On-Demand Applications?<a class="headerlink" href="#where-are-the-on-demand-applications" title="Link to this heading"></a></h3>
<p>On the LUNARC HPC Desktop, the Applications menu lists all the applications available to be run interactively, and opening one prefixed by “Applications -” will start it in Desktop On Demand. There is no specific “Desktop On Demand” application in the list. Most common IDEs can be found in a drop-down menu that appears when you hover over <code class="docutils literal notranslate"><span class="pre">Applications</span> <span class="pre">-</span> <span class="pre">&lt;Language&gt;</span></code> for your language of choice, but more niche packages may be listed under a subject-matter field instead, like <code class="docutils literal notranslate"><span class="pre">Applications</span> <span class="pre">-</span> <span class="pre">Engineering</span></code>.</p>
<div class="admonition-terminals-on-the-compute-nodes admonition">
<p class="admonition-title">Terminals on the Compute nodes</p>
<p>If you don’t see the program you want to run interactively listed under any other <code class="docutils literal notranslate"><span class="pre">Applications</span></code> sub-menus, you may still be able to launch it via one of the terminals under <code class="docutils literal notranslate"><span class="pre">Applications</span> <span class="pre">-</span> <span class="pre">General</span></code>, or the <strong>GPU Accelerated Terminal</strong> (GPU support) under <code class="docutils literal notranslate"><span class="pre">Applications</span> <span class="pre">-</span> <span class="pre">Visualization</span></code>.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/Cosmos-AppMenu.png"><img alt="../_images/Cosmos-AppMenu.png" src="../_images/Cosmos-AppMenu.png" style="width: 400px;" />
</a>
</figure>
<p>The CPU terminal allows for a wall time of up to 168 hours (7 days), while the two GPU terminals can only run for 48 hours (2 days) at most. For more on the specifications of the different nodes these terminals can run on, see <a class="reference external" href="https://www.lunarc.lu.se/systems/cosmos/">LUNARC’s webpage on COSMOS</a>.</p>
</div>
<p><strong>Please be aware that only the applications in the menus prefixed with “Applications -” are set up to run on the Compute nodes.</strong> If you start a terminal session or other application from <code class="docutils literal notranslate"><span class="pre">Favorites</span></code> or <code class="docutils literal notranslate"><span class="pre">System</span> <span class="pre">Tools</span></code> and launch an interactive program from that, it will run on a Login node, with all the risks that that entails for your user privileges.</p>
<div class="dropdown admonition note">
<p class="admonition-title">Note</p>
<p>What if On-Demand Applications are missing from the menu?</p>
<p>On rare occasions, a user may find that the Applications menu is missing all <code class="docutils literal notranslate"><span class="pre">Applications</span> <span class="pre">-</span> <span class="pre">&lt;App_group&gt;</span></code> options. This usually indicates that your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file is either missing or has had problematic changes made to it, especially if LMOD commands like <code class="docutils literal notranslate"><span class="pre">ml</span> <span class="pre">spider</span> <span class="pre">&lt;package&gt;</span></code> are also not recognized. If you are a new user on your very first session on COSMOS, the problem should resolve itself if you start a new ThinLinc session with “End existing session” selected. If you are not a new user and module commands are recognized, running <code class="docutils literal notranslate"><span class="pre">gfxmenu</span> <span class="pre">--force</span></code> in a terminal session may resolve the issue; otherwise, you will probably have to submit a support ticket.</p>
</div>
</section>
<section id="how-do-i-start">
<h3>How do I start?<a class="headerlink" href="#how-do-i-start" title="Link to this heading"></a></h3>
<p>For most programs, the start-up process is roughly the same:</p>
<ol class="arabic">
<li><p>Log into COSMOS via Thinlinc to start a LUNARC HPC Desktop session.</p></li>
<li><p>Click <code class="docutils literal notranslate"><span class="pre">Applications</span></code> in the top left corner and hover over the items prefixed with <code class="docutils literal notranslate"><span class="pre">Applications</span> <span class="pre">-</span></code> until you find your desired application.</p></li>
<li><dl class="simple">
<dt>Upon clicking your chosen application, a pop-up, the Gfx Launcher interface, will appear and let you set the following options:</dt><dd><ol class="arabic simple">
<li><p><strong>Wall time</strong> - how long your interactive session will remain open. When it ends, the whole window closes immediately and any unsaved work is lost. You can select the time from a drop-down menu, or type in the time manually. CPU-only applications can run for up to 168 hours (7 days), but the rest are limited to 48 hours. Default is 30 minutes.</p></li>
<li><p><strong>Requirements</strong> - how many tasks per node you need. The default is usually 1 or 4 tasks per node. There is also a <strong>gear icon</strong> to the right of this box that can pull up a second menu where you can set the name of your job, the number of tasks per node, the amount of memory per CPU core, and/or toggle whether or not to use a full node.</p></li>
<li><p><strong>Resource</strong> - which kind of node you want in terms of the architecture (AMD or Intel) and number of cores in the CPU (or GPU). Options and defaults vary by program, but it is recommended that you leave the default node type in place.</p></li>
<li><p><strong>Project</strong> - choose from a drop-down menu the project with which your work is associated. This is mainly to keep your usage in line with your licenses and permissions, and to send any applicable invoices to the correct PI. Licensed software will only work for projects whose group members are covered by the license.</p></li>
</ol>
</dd>
</dl>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="../_images/cosmos-on-demand-resource-specs.png"><img alt="../_images/cosmos-on-demand-resource-specs.png" src="../_images/cosmos-on-demand-resource-specs.png" style="width: 600px;" />
</a>
<figcaption>
<p><span class="caption-text">The GfxLauncher GUI (here used to launch Spyder). The box on the left is the basic menu and the box on the right is what pops up when the gear icon next to <code class="docutils literal notranslate"><span class="pre">Requirements</span></code> is clicked.</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
</li>
</ol>
<ol class="arabic simple" start="4">
<li><p>When you’re happy with your settings, click “Start”. The Gfx Launcher menu will stay open in the background so that you can monitor your remaining time and resources with the <code class="docutils literal notranslate"><span class="pre">Usage</span></code> bar.</p></li>
</ol>
<p>If you want, you can also look at the associated SLURM scripts by clicking the “More” button at the bottom of the Gfx Launcher menu and clicking the “Script” tab (example below), or view the logs under the “Logg” tab.</p>
<blockquote>
<div><figure class="align-center">
<a class="reference internal image-reference" href="../_images/cosmos-on-demand-more.png"><img alt="../_images/cosmos-on-demand-more.png" src="../_images/cosmos-on-demand-more.png" style="width: 400px;" />
</a>
</figure>
</div></blockquote>
<p>For a few applications (e.g. Jupyter Lab), GfxLauncher will also offer an additional menu item titled <code class="docutils literal notranslate"><span class="pre">Job</span> <span class="pre">settings...</span></code>. This is where you can load custom environments or additional modules if absolutely necessary. However, this feature is still a work in progress; any module already in the module box when you first open <code class="docutils literal notranslate"><span class="pre">Job</span> <span class="pre">settings</span></code> is likely necessary to run the program, and searching for additional modules (Select modules button) tends to erase any listed previously. For now, additional modules must be entered by hand (not always including the version number) in a comma-separated list. Moreover, incompatible and redundant modules tend to make the application shut down as soon as it is queued, raising a spurious alert that the requested walltime has expired.</p>
<blockquote>
<div><figure class="align-center" id="id2">
<a class="reference internal image-reference" href="../_images/cosmos-on-demand-job-settings.png"><img alt="../_images/cosmos-on-demand-job-settings.png" src="../_images/cosmos-on-demand-job-settings.png" style="width: 550px;" />
</a>
<figcaption>
<p><span class="caption-text">The Job Properties menu (right) pops up when the box titled <code class="docutils literal notranslate"><span class="pre">Job</span> <span class="pre">settings...</span></code> in the main GfxLauncher window (left) is clicked. Only use it if you know what you’re doing!</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
</div></blockquote>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="interactive.html" class="btn btn-neutral float-left" title="Interactive work on the compute nodes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="IDEs.html" class="btn btn-neutral float-right" title="Loading IDEs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, UPPMAX/HPC2N/LUNARC/InfraVis.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>